@import java.text.NumberFormat
@import play.api.libs.json.JsValue
@*uuid、期数、报告*@
@(uuid: String, phrase: String, report: JsValue)

@version_2.model.application.template("区域管理模拟平台"){
    <input type="hidden" name="uuid" value="@uuid" disabled="disabled">
    <input type="hidden" name="phase" value="@phrase" disabled="disabled">
    <div class="home">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="header">
                        <div class="row head-describe">
                            <div class="col-md-11 box bg">
                                <div class="col-md-5 col-sm-5 col-xs-5">周期(@{phrase})&nbsp;&nbsp;100天计划部署</div>
                                <div class="col-md-7 col-sm-7 col-xs-7 text-right">
                                    <div class="config"><i class="glyphicon glyphicon-cog"></i></div>
                                    <div class="timer"><i class="glyphicon glyphicon-time"></i><span>00:00</span></div>
                                </div>
                            </div>
                            <div class="col-md-1 text-right">
                                <button class="btn btn-primary btn-md submit-btn" name="go" type="button">进入周期2</button>
                            </div>
                        </div>
                    </div>
                    <div class="report">
                        <div class="row">
                            <div class="menu box bg">
                                <ul class="menu-tab box">
                                    <li class="box active" name="all-about">整体表现</li>
                                    <li class="box" name="manager-report">经理报告</li>
                                    <li class="box" name="salesman-report">代表报告</li>
                                    <li class="box" name="resource-allot">资源分配</li>
                                    <li class="box " name="sales-report">销售报告</li>
                                </ul>
                            </div>
                            <div class="content box">
                                <div class="content-container container_0" name="all-about"  >
                                    <div class="">
                                        <table class="table left-tips">
                                            <tr>
                                                <td></td>
                                                <td>原始值</td>
                                                <td>周期(1)</td>
                                                <td>周期(2)</td>
                                            </tr>
                                            @{
                                                val reVal = (report \ "report").as[List[JsValue]]
                                                        .find(f => (f \ "report_name").as[String] == "市场销售报告_商业价值").get

                                                val team = (reVal \ "result").as[List[JsValue]]
                                                        .find(f => (f \ "general_names").as[String] == "团队能力(指数)").get

                                                val totalProfits = (reVal \ "result").as[List[JsValue]]
                                                        .find(f => (f \ "general_names").as[String] == "总利润(元)").get

                                                val totalSales = (reVal \ "result").as[List[JsValue]]
                                                        .find(f => (f \ "general_names").as[String] == "总销售(元)").get

                                                val score = (reVal \ "result").as[List[JsValue]]
                                                        .find(f => (f \ "general_names").as[String] == "得分").get

                                                val totalScore = (reVal \ "result").as[List[JsValue]]
                                                        .find(f => (f \ "general_names").as[String] == "累计得分").get

                                                <tr>
                                                    <td>团队能力指数</td>
                                                    <td>{(team \ "phase0").as[Int]}</td>
                                                    <td>{(team \ "phase1").as[Int]}</td>
                                                    <td>{
                                                        if((team \ "phase2").as[Int] != -1) (team \ "phase2").as[Int]
                                                    }</td>
                                                </tr>

                                                <tr>
                                                    <td>总利润</td>
                                                    <td>{
                                                        NumberFormat.getInstance().format((totalProfits \ "phase0").as[Double])
                                                    }</td>
                                                    <td>{
                                                        NumberFormat.getInstance().format((totalProfits \ "phase1").as[Double])
                                                    }</td>
                                                    <td>{
                                                        if((team \ "phase2").as[Int] != -1)
                                                            NumberFormat.getInstance().format((totalProfits \ "phase2").as[Double])
                                                    }</td>
                                                </tr>
                                                <tr>
                                                    <td>总销售</td>
                                                    <td>{
                                                        NumberFormat.getInstance().format((totalSales \ "phase0").as[Double])
                                                    }</td>
                                                    <td>{
                                                        NumberFormat.getInstance().format((totalSales \ "phase1").as[Double])
                                                    }</td>
                                                    <td>{
                                                        if((team \ "phase2").as[Int] != -1)
                                                            NumberFormat.getInstance().format((totalSales \ "phase2").as[Double])
                                                    }</td>
                                                </tr>
                                                <tr>
                                                    <td>得分</td>
                                                    <td>{
                                                        if((score \ "phase0").as[Int] != -1) (totalScore \ "phase0").as[Int]
                                                    }</td>
                                                    <td>{
                                                        (score \ "phase1").as[Double]
                                                    }</td>
                                                    <td>{
                                                        if((score \ "phase2").as[Int] != -1) (score \ "phase2").as[Double]
                                                    }</td>
                                                </tr>
                                                <tr>
                                                    <td>累计得分</td>
                                                    <td>{
                                                        if((totalScore \ "phase0").as[Int] != -1) (totalScore \ "phase0").as[Int]
                                                    }</td>
                                                    <td>{
                                                        (totalScore \ "phase1").as[Int]
                                                    }</td>
                                                    <td>{
                                                        if((totalScore \ "phase2").as[Int] != -1) (totalScore \ "phase2").as[Int]
                                                    }</td>
                                                </tr>
                                            }
                                        </table>
                                    </div>
                                    <div class="">
                                        <table class="table left-tips">
                                            <tr>
                                                <td><div class="title">产品销售表现</div></td>
                                                <td>当期销售指标</td>
                                                <td>上期销售额</td>
                                                <td>当期销售额</td>
                                                <td>增长</td>
                                                <td>增长率(%)</td>
                                                <td>达成率(%)</td>
                                            </tr>
                                            @{
                                                val reVal = (report \ "report").as[List[JsValue]]
                                                        .find(f => (f \ "report_name").as[String] == "销售报告_销售额每产品").get

                                                (reVal \ "result").as[List[JsValue]].map { antibiotics =>
                                                    <tr>
                                                        <td>{(antibiotics \ "prod_name").as[String]}</td>
                                                        <td>{NumberFormat.getInstance().format((antibiotics \ "current_target").asOpt[Int].get.toDouble)}</td>
                                                        <td>{NumberFormat.getInstance().format((antibiotics \ "last_revenue").asOpt[Int].get.toDouble)}</td>
                                                        <td>{NumberFormat.getInstance().format((antibiotics \ "current_revenue").asOpt[Int].get.toDouble)}</td>
                                                        <td>{NumberFormat.getInstance().format((antibiotics \ "increase_revenue").asOpt[Int].get.toDouble)}</td>
                                                        <td>{NumberFormat.getInstance().format((antibiotics \ "increase_ratio").asOpt[Double].get)}</td>
                                                        <td>{NumberFormat.getInstance().format((antibiotics \ "target_realization").asOpt[Double].get)}</td>
                                                    </tr>
                                                }

                                            }

                                        </table>
                                    </div>
                                </div>
                                <div class="content-container container_1 unvisible" name="manager-report" >
                                    <div class="manager-top top-table">
                                        <table class="table left-tips">
                                            <tr>
                                                <td><div class="title">职员成本</div></td>
                                                <td>小宋</td>
                                                <td>小兰</td>
                                                <td>小木</td>
                                                <td>小白</td>
                                                <td>小青</td>
                                            </tr>
                                            <tr>
                                                <td>绩效奖金</td>
                                                @{
                                                    val reVal = (report \ "report").as[List[JsValue]]
                                                            .find(f => (f \ "report_name").as[String] == "经理报告_职员成本").get

                                                    (reVal \ "result").as[List[JsValue]].map{ salesmen =>
                                                            if((salesmen \ "salesmen").as[String] != "总体") {
                                                                    <td>{NumberFormat.getInstance().format((salesmen \ "bonus").as[Int])}</td>
                                                            }else {}
                                                    }
                                                }

                                            </tr>
                                        </table>
                                    </div>
                                    <div class="manager-bottom bottom-table">
                                        <table class="table left-tips">
                                            <tr>
                                                <td><div class="title">经理时间分配</div></td>
                                                <td>天数</td>
                                            </tr>
                                            @{
                                                val reVal = (report \ "report").as[List[JsValue]]
                                                        .find(f => (f \ "report_name").as[String] == "经理报告_时间分配").get

                                                (reVal \ "result").as[List[JsValue]].map{ allottime =>
                                                    <tr>
                                                        <td>{(allottime \ "general_names").as[String].dropRight(3)}</td>
                                                        <td>{(allottime \ "values").as[Int]}</td>
                                                    </tr>
                                                }
                                            }
                                        </table>
                                    </div>
                                </div>
                                <div class="content-container container_2 unvisible" name="salesman-report" >
                                    <div class="salesman-top top-table">
                                        <table class="table left-tips">
                                            <tr>
                                                <td><div class="title">代表时间分配</div></td>
                                                <td>小宋</td>
                                                <td>小兰</td>
                                                <td>小木</td>
                                                <td>小白</td>
                                                <td>小青</td>
                                            </tr>
                                            <tr>
                                                <td>日常事务</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>产品培训</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>团队会议</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>医院拜访</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>总工作天数</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="salesman-bottom bottom-table">
                                        <table class="table left-tips overflow-table-head">
                                            <thead>
                                                <tr>
                                                    <td><div class="title">代表能力变化</div></td>
                                                    <td>小宋</td>
                                                    <td>小兰</td>
                                                    <td>小木</td>
                                                    <td>小白</td>
                                                    <td>小青</td>
                                                </tr>
                                            </thead>
                                        </table>
                                        <div class="salesman-bottom-inside bottom-table-container">
                                            <div class="inside-div">
                                            <table class="table overflow-table">
                                                <tbody>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>日常事务</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="content-container container_3 unvisible" name="resource-allot">
                                    <div class="resource-allot-select select-area">
                                        <div class="allot-select-area select-hospital">
                                            <span>选择医院</span>
                                            <select class="hospital" name="resource-allot-hospital">
                                                <option selected="selected" disabled="disabled"  style='display: none' value=''></option>
                                                <option value="h_1">人民医院</option>
                                                <option value="h_2">军区医院</option>
                                                <option value="h_3">中日医院</option>
                                                <option value="h_4">铁路医院</option>
                                                <option value="h_5">海港医院</option>
                                                <option value="h_6">第六医院</option>
                                                <option value="h_7">小营医院</option>
                                                <option value="h_8">光华医院</option>
                                                <option value="h_9">西华医院</option>
                                                <option value="h_10">大学医院</option>
                                            </select>
                                        </div>
                                        <div class="allot-select-area select-dimension">
                                            <span>选择维度</span>
                                            <select class="dimension" name="">
                                                <option selected="selected" disabled="disabled"  style='display: none' value=''></option>
                                                <option value="d_1">销售代表</option>
                                                <option value="d_2">计划时间分配（天）</option>
                                                <option value="d_3">实际时间分配（天）</option>
                                                <option value="d_4">销售额（元）</option>
                                                <option value="d_5">推广费用（元）</option>
                                                <option value="d_6">生产成本（元）</option>
                                                <option value="d_7">利润（元）</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="resource-allot-bottom bottom-table">
                                        <table class="table overflow-table-head">
                                            <tr>
                                                <td>医院</td>
                                                <td>因素</td>
                                                <td>口服抗生药</td>
                                                <td>一代降糖药</td>
                                                <td>三代降糖药</td>
                                                <td>皮肤药</td>
                                                <td>总体</td>
                                            </tr>
                                        </table>
                                        <div class="resource-allot-bottom-inside bottom-table-container">
                                            <div class="inside-div">
                                                <table class="table overflow-table">
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="content-container container_4 unvisible" name="sales-report" >
                                    <div class="sales-report-select select-area">
                                        <div class="sales-select-area select-hospital">
                                            <span>选择医院</span>
                                            <select class="hospital" name="sales-report-hospital">
                                                <option selected="selected" disabled="disabled"  style='display: none' value=''></option>
                                                <option value="h_1">人民医院</option>
                                                <option value="h_2">军区医院</option>
                                                <option value="h_3">中日医院</option>
                                                <option value="h_4">铁路医院</option>
                                                <option value="h_5">海港医院</option>
                                                <option value="h_6">第六医院</option>
                                                <option value="h_7">小营医院</option>
                                                <option value="h_8">光华医院</option>
                                                <option value="h_9">西华医院</option>
                                                <option value="h_10">大学医院</option>

                                            </select>
                                        </div>
                                        <div class="sales-select-area select-prod">
                                            <span>选择产品</span>
                                            <select class="prod" name="">
                                                <option selected="selected" disabled="disabled"  style='display: none' value=''></option>
                                                <option value="p_1">口服抗生素</option>
                                                <option value="p_2">一代降糖药</option>
                                                <option value="p_3">三代降糖药</option>
                                                <option value="p_4">皮肤药</option>
                                                <option value="p_5">总体</option>


                                            </select>
                                        </div>
                                    </div>
                                    <div class="sales-report-bottom bottom-table">
                                        <table class="table overflow-table-head">
                                            <tr>
                                                <td>医院</td>
                                                <td>产品</td>
                                                <td>上周销售额</td>
                                                <td>当前销售额</td>
                                                <td>增长</td>
                                                <td>增长率(%)</td>
                                                <td>达成率(%)</td>
                                            </tr>
                                        </table>
                                        <div class="resource-allot-bottom-inside bottom-table-container">
                                            <div class="inside-div">
                                                <table class="table overflow-table">
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



        </div>
    </div>
}
