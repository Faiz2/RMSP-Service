@import java.text.NumberFormat
@import play.api.libs.json.JsValue
@*uuid、期数、医院新闻、产品、代表 , 总预算，医院列表, 输入*@
@(uuid: String, phrase: String, hosp_news: JsValue,
        product: List[JsValue], salesman: List[JsValue], totalBudget: JsValue,
        hosp_list: List[JsValue], inputs: List[JsValue])

@version_2.model.application.template("区域管理模拟平台"){
    <input type="hidden" name="uuid" value="@uuid" disabled="disabled">
    <input type="hidden" name="phase" value="@phrase" disabled="disabled">
    <div class="home">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="header">
                        <div class="row head-describe box bg">
                            <div class="col-md-12">
                                <div class="col-md-5 col-sm-5 col-xs-5">周期(@{phrase})&nbsp;&nbsp;100天计划部署</div>
                                <div class="col-md-7 col-sm-7 col-xs-7 text-right">
                                    <div class="config"><i class="glyphicon glyphicon-cog"></i></div>
                                    <div class="timer"><i class="glyphicon glyphicon-time"></i><span>00:00</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="message-box" name="message-box">
                        <div class="row show-info">
                            <div class="decision-info-btn box bg">
                                <p><img src="@routes.Assets.versioned("images/version_2/file.png")" class="center-block" width="48" height="50"></p>
                                <p class="text-center"><button class="btn btn-primary btn-sm btn-radius btn-tenuous" type="button" name="details-btn">查看信息</button></p>
                            </div>
                            <div class="resource-manager-info box bg">
                                <div class="number-info">
                                    <p class="text-left">总预算</p>
                                    <p class="text-right">
                                        <span class="number-size-lg">
                                            @{
                                                val num = (totalBudget \ phrase \ "budget").asOpt[String].map (x => x).getOrElse("")
                                                NumberFormat.getInstance().format(num.toDouble)
                                            }
                                        </span>
                                        <span>元</span>
                                    </p>
                                    <p class="total-budget" id="total-budget"></p>
                                </div>
                                <div class="person-details-info">
                                    <div class="detail">
                                        <p>团队成员<br>已分配时间</p>
                                    </div>
                                    <div class="detail">
                                        <div class="graphicsy-pie" id="xiaosong"></div>
                                        <div class="person-name">小宋</div>
                                    </div>
                                    <div class="detail">
                                        <div class="graphicsy-pie" id="xiaobai"></div>
                                        <div class="person-name">小白</div>
                                    </div>
                                    <div class="detail">
                                        <div class="graphicsy-pie" id="xiaolan"></div>
                                        <div class="person-name">小兰</div>
                                    </div>
                                    <div class="detail">
                                        <div class="graphicsy-pie" id="xiaomu"></div>
                                        <div class="person-name">小木</div>
                                    </div>
                                    <div class="detail">
                                        <div class="graphicsy-pie" id="xiaoqing"></div>
                                        <div class="person-name">小青</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row hosp-array-info box">
                            <ul name="hosp-list">
                                @{
                                    hosp_list.zipWithIndex.map { hosp =>
                                        <li class={"box "+(if(hosp._2 == 0){"active"})+""} name={(hosp._1 \ "hosp_name").asOpt[String].get}><!--active-->
                                            <div class="content">
                                                <p class="text-right">{(hosp._1 \ "hosp_name").asOpt[String].get}</p>
                                                <p class="text-right"><span>$</span>--<span>%</span></p>
                                                <p class="text-right">
                                                    <span><i class="glyphicon glyphicon-user"></i></span>
                                                    <span>--</span>
                                                </p>
                                            </div>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                        <div class="row hosp-array-masklayer"></div>
                    </div>
                </div>
            </div>

            <div class="row" name="input-box">
                <div class="col-md-12">
                    <div class="bottom" name="bottom">
                        @hosp_list.zipWithIndex.map { hosp =>
                            <div class="row hosp-input-info box" name=@{(hosp._1 \ "hosp_name").asOpt[String].get} @if(hosp._2 != 0){style="display: none;"}>
                                <div class="sales-planning">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="hosp-info box bg" name="hosp-info">
                                                <p name="hosp-info-name">@{(hosp._1 \ "hosp_name").asOpt[String].get}</p>
                                                <div class="hosp-info-salesman">
                                                    <div class="salesman-picture">
                                                        <img src=@{routes.Assets.versioned("images/version_2/salesmen-picture.png")} width="95" height="95" alt="人像">
                                                    </div>
                                                    <div class="selected-salesman">
                                                        <span>请指派代表</span><br>
                                                        <select class="" name="">
                                                            <option value="">未分配</option>
                                                            <option value="">不分配</option>

                                                            @salesman.reverse.map { person =>
                                                                <option value="@{(person \ "name").asOpt[String]}">@{(person \ "name").asOpt[String]}</option>
                                                            }
                                                            <!--<option value="小宋">小宋</option>
                                                            <option value="小白">小白</option>
                                                            <option value="小兰">小兰</option>
                                                            <option value="小木">小木</option>
                                                            <option value="小青">小青</option>-->
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="input-budget">
                                                    <p>
                                                        <span>分配推广预算</span>
                                                        <span><input type="text" name="input-budget" maxlength="4" disabled>&nbsp;%</span>
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="hosp-budget box bg" name="hosp-budget">
                                                <ul>
                                                    <li>
                                                        <ul>
                                                            <li class="left-title">&nbsp;</li>
                                                            <li class="left-title">药品潜力</li>
                                                            <li class="left-title">上期销售额</li>
                                                            <li class="left-title">指标设定</li>
                                                            <li class="left-title">沟通时间</li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <ul>
                                                            <li class="top-tetile">口服抗生素</li>
                                                            <li>
                                                                <span class="hosp-budget-number">@{NumberFormat.getInstance().format((hosp._1 \ "口服抗生素").asOpt[List[String]].get.tail.head.toDouble)}</span>
                                                                <span>元</span>
                                                            </li>
                                                            <li>
                                                                <span class="hosp-budget-number">@{NumberFormat.getInstance().format((hosp._1 \ "口服抗生素").asOpt[List[String]].get.head.replace(",", "").toDouble)}</span>
                                                                <span>元</span>
                                                            </li>
                                                            <li><input type="text">&nbsp;元</li>
                                                            <li><input type="text">&nbsp;天</li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <ul>
                                                            <li class="top-tetile">一代降糖药</li>
                                                            <li>
                                                                <span class="hosp-budget-number">@{NumberFormat.getInstance().format((hosp._1 \ "一代降糖药").asOpt[List[String]].get.tail.head.toDouble)}</span>
                                                                <span>元</span>
                                                            </li>
                                                            <li>
                                                                <span class="hosp-budget-number">@{NumberFormat.getInstance().format((hosp._1 \ "一代降糖药").asOpt[List[String]].get.head.replace(",", "").toDouble)}</span>
                                                                <span>元</span>
                                                            </li>
                                                            <li><input type="text">&nbsp;元</li>
                                                            <li><input type="text">&nbsp;天</li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <ul>
                                                            <li class="top-tetile">三代降糖药</li>
                                                            <li>
                                                                <span class="hosp-budget-number">@{NumberFormat.getInstance().format((hosp._1 \ "三代降糖药").asOpt[List[String]].get.tail.head.toDouble)}</span>
                                                                <span>元</span>
                                                            </li>
                                                            <li>
                                                                <span class="hosp-budget-number">@{NumberFormat.getInstance().format((hosp._1 \ "三代降糖药").asOpt[List[String]].get.head.replace(",", "").toDouble)}</span>
                                                                <span>元</span>
                                                            </li>
                                                            <li><input type="text">&nbsp;元</li>
                                                            <li><input type="text">&nbsp;天</li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <ul>
                                                            <li class="top-tetile">皮肤药</li>
                                                            <li>
                                                                <span class="hosp-budget-number">@if((hosp._1 \ "皮肤药").asOpt[List[String]].get.tail.head.isEmpty) {0} else {@{NumberFormat.getInstance().format((hosp._1 \ "皮肤药").asOpt[List[String]].get.tail.head.toDouble)}}</span>
                                                                <span>元</span>
                                                            </li>
                                                            <li>
                                                                <span class="hosp-budget-number">@{NumberFormat.getInstance().format((hosp._1 \ "皮肤药").asOpt[List[String]].get.head.replace(",", "").toDouble)}</span>
                                                                <span>元</span>
                                                            </li>
                                                            <li><input type="text">&nbsp;元</li>
                                                            <li><input type="text">&nbsp;天</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                        <div class="row">
                            <div class="personnel-training" style="display: none;">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="input-personel">
                                            <div class="input-manager box bg">
                                                <p></p>
                                                <table>
                                                    <tr>
                                                        <td class="assist-tag"></td>
                                                        <td class="assist-tag"></td>
                                                        <td class="person-tips">小宋</td>
                                                        <td class="person-tips">小白</td>
                                                        <td class="person-tips">小兰</td>
                                                        <td class="person-tips">小木</td>
                                                        <td class="person-tips">小青</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="assist-tag"><div class="tag"></div></td>
                                                        <td class="name-tips">经理协作拜访</td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="input-training box bg">
                                                <p></p>
                                                <table>
                                                    <tr>
                                                        <td class="training-tag"></td>
                                                        <td class="training-tag"></td>
                                                        <td class="person-tips">小宋</td>
                                                        <td class="person-tips">小白</td>
                                                        <td class="person-tips">小兰</td>
                                                        <td class="person-tips">小木</td>
                                                        <td class="person-tips">小青</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="training-tag"><div class="tag"></div></td>
                                                        <td class="name-tips">1对1能力辅导</td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="meeting-tag"><div class="tag"></div></td>
                                                        <td class="name-tips">列会/团建</td>
                                                        <td colspan="7" class="input-meeting"><input type="text"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="meeting-tag"></td>
                                                        <td class="name-tips">脱岗产品培训</td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="meeting-tag"></td>
                                                        <td class="name-tips">总计</td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                        <td><input type="text"></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="input-display box bg">
                                            <div class="col-md-7">
                                                <table class="text-display">
                                                    <tr>
                                                        <td class="assist-tag"><div class="tag"></div></td>
                                                        <td class="name-tips">协助拜访</td>
                                                        <td class="kpi-tag"><div class="tag"></div></td>
                                                        <td class="name-tips">KPI分析</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="assist-tag"></td>
                                                        <td><span class="big-text">30</span>天</td>
                                                        <td class="kpi-tag"></td>
                                                        <td><input type="text"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="training-tag"><div class="tag"></div></td>
                                                        <td class="name-tips">能力辅导</td>
                                                        <td class="administrativ-tag"><div class="tag"></div></td>
                                                        <td class="name-tips">行政工作</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="training-tag"></td>
                                                        <td><span class="big-text">31</span>天</td>
                                                        <td class="administrativ-tag"></td>
                                                        <td><input type="text"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="meeting-tag"><div class="tag"></div></td>
                                                        <td class="name-tips">例会/团建</td>
                                                        <td class="undistributed-tag"><div class="tag"></div></td>
                                                        <td class="name-tips">未分配</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="meeting-tag"></td>
                                                        <td><span class="big-text">3</span>天</td>
                                                        <td class="undistributed-tag"></td>
                                                        <td><span class="big-text">16</span>天</td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="col-md-5">
                                                <div class="allot-time" id="hospcode-1-allot-time"></div>
                                                <p class="text-center">经理的分配时间比例</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>

            <div class="row answer-tab" name="answer-tab">
                <div class="col-md-8 col-sm-8 col-xs-8 text-right">
                    <div class="btn-group" name="btn-group" role="group">
                        <button type="button " class="btn btn-default active">销售计划</button>
                        <button type="button" class="btn btn-default">人员培训</button>
                    </div>
                </div>
                <div class="col-md-2 col-sm-2 col-xs-2 col-md-offset-2 col-sm-offset-2 col-xs-offset-2 text-right">
                    <button class="btn btn-primary btn-md submit-btn" name="submit-btn" type="button">提交执行</button>
                </div>
            </div>

            <!--资源管理详情-->
            <div class="row resource-info" name="resource-info" style="display:none;">
                @version_2.model.rsinformation.template(phrase, salesman, hosp_news, hosp_list, product)
            </div>
        </div>
    </div>
}
